<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Enter Receipient Details</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"
    />
    <style>
      @keyframes shake {
        0%, 100% { transform: translateX(0); }
        20%, 60% { transform: translateX(-5px); }
        40%, 80% { transform: translateX(5px); }
      }

      .shake {
        animation: shake 0.3s ease-in-out;
      }

      #keyboard-qwerty, #keypad {
        min-height: 320px;
        max-width: 28rem; /* same as max-w-md in Tailwind */
        width: 100%;
        margin: 0 auto;
    }

     #keyboard-qwerty button {
        font-size: 1rem;
  padding-top: 0.75rem;
  padding-bottom: 0.75rem;
}

    </style>
    <script>
      function validatePhoneNumber() {
        const inputField = document.getElementById('mobile');
        const payidField = document.getElementById('payid');
        if (inputField.value.length === 10) {
          payidField.disabled = false;
        } else {
          payidField.disabled = true;
        }
      }

      function appendNumber(number) {
        const inputField = document.getElementById('mobile');
        if (inputField.value.length < 10) {
          inputField.value += number;
        }
        validatePhoneNumber();
      }

      function backspace() {
        const inputField = document.getElementById('mobile');
        inputField.value = inputField.value.slice(0, -1);
        validatePhoneNumber();
      }

      function finalizeInput() {
        const inputField = document.getElementById('mobile');
        const payidField = document.getElementById('payid');
        if (inputField.value.length === 10) {
          payidField.disabled = false;
          payidField.focus();
        } else {
          inputField.classList.add('shake');
          setTimeout(() => inputField.classList.remove('shake'), 300);
        }
      }

      let isShifted = false;

      function toggleShift() {
        isShifted = !isShifted;
        const buttons = document.querySelectorAll('#keyboard-qwerty button');
        buttons.forEach(button => {
          const char = button.innerText;
          if (char.length === 1) {
            button.innerText = isShifted ? char.toUpperCase() : char.toLowerCase();
          }
        });
      }

      function backspaceName() {
        const payidField = document.getElementById('payid');
        payidField.value = payidField.value.slice(0, -1);
      }

      function handleSpace() {
        const payidField = document.getElementById('payid');
        payidField.value += ' ';
      }

      function showQwertyKeyboard() {
        document.getElementById('keyboard-qwerty').classList.remove('hidden');
        document.getElementById('keypad').classList.add('hidden');
      }

      function finalizePayID() {
        document.getElementById('keyboard-qwerty').classList.add('hidden');
        document.getElementById('keypad').classList.remove('hidden');
      }

      function appendCharacter(char) {
        const payidField = document.getElementById('payid');
        if (isShifted) {
          char = char.toUpperCase();
        }
        payidField.value += char;
      }
    </script>
  </head>

  <body class="bg-[#121212] text-white font-sans min-h-screen flex flex-col">
    <header class="flex items-center space-x-3 px-4 py-3 border-b border-gray-700">
      <button class="text-white text-xl" aria-label="Back">
        <i class="fas fa-arrow-left"></i>
      </button>
      <h1 class="text-lg font-normal">PayID Payment</h1>
    </header>

    <main class="flex flex-col items-center px-6 pt-10 space-y-8 flex-grow">
      <!-- Logo -->
      <div class="flex items-center space-x-2 text-3xl font-semibold select-none">
        <span>Pay</span>
        <div class="bg-gray-300 rounded-lg w-10 h-10 flex items-center justify-center text-black font-bold text-xl">
          i<span class="text-xl font-normal">D</span>
          <i class="fas fa-arrow-right ml-1 text-base"></i>
        </div>
      </div>
      <!-- Back button -->
    <button
       aria-label="Back"
       class="w-10 h-10 rounded-full bg-black bg-opacity-60 flex items-center justify-center mb-6 self-start"
       onclick="window.history.back()"
       >
       <i class="fas fa-arrow-left text-white text-lg"></i>
    </button>

      <!-- Tabs -->
      <div class="flex w-full max-w-md border border-gray-400 rounded-md overflow-hidden text-sm select-none">
        <button class="flex-1 bg-white text-black py-2 border-r border-gray-400">Mobile</button>
        <button class="flex-1 bg-transparent text-white py-2 border-r border-gray-400">Email</button>
        <button class="flex-1 bg-transparent text-white py-2">Other</button>
      </div>

      <!-- Mobile Number Input -->
      <div class="w-full max-w-md space-y-1">
        <label for="mobile" class="block text-gray-300 text-sm mb-1">Mobile Number</label>
        <input
          id="mobile"
          type="tel"
          inputmode="numeric"
          pattern="[0-9]*"
          class="w-full bg-transparent border-b border-blue-400 text-white text-lg py-1 focus:outline-none"
          autocomplete="off"
          maxlength="10"
          oninput="validatePhoneNumber()"
        />
        <div class="flex justify-end">
          <a href="#" class="text-blue-500 text-sm mt-1">Search my contacts</a>
        </div>
      </div>

      <!-- PayID Input -->
    <div class="w-full max-w-md space-y-4">
        <div class="space-y-1">
        <label for="payid" class="block text-gray-300 text-sm">PayID Name</label>
      <input
        id="payid"
        type="text"
        class="w-full bg-transparent border-b border-blue-400 text-white text-lg py-1 focus:outline-none"
        disabled
        autocomplete="off"
        onfocus="showQwertyKeyboard()"
        oninput="updatePayID()"
      />
    </div>
  </div>
  
  <script>
    function updatePayID() {
      const payidField = document.getElementById('payid');
      localStorage.setItem('payid', payidField.value); // Update localStorage with the current PayID value
    }
  </script>
    </main>

    <!-- Keypad Container -->
    <div id="keypad" class="bg-[#121212] px-2 pb-4 pt-2 select-none">
        <div class="grid grid-cols-4 gap-2 w-full text-white text-xl font-semibold">
        <button onclick="appendNumber('1')" class="bg-[#2a3a3a] rounded-md py-4">1</button>
        <button onclick="appendNumber('2')" class="bg-[#2a3a3a] rounded-md py-4">2 <span class="block text-xs">ABC</span></button>
        <button onclick="appendNumber('3')" class="bg-[#2a3a3a] rounded-md py-4">3 <span class="block text-xs">DEF</span></button>
        <button onclick="backspace()" class="bg-[#1a2a2a] rounded-md py-4"><i class="fas fa-backspace"></i></button>

        <button onclick="appendNumber('4')" class="bg-[#1a2a2a] rounded-md py-4">4 <span class="block text-xs">GHI</span></button>
        <button onclick="appendNumber('5')" class="bg-[#2a3a3a] rounded-md py-4">5 <span class="block text-xs">JKL</span></button>
        <button onclick="appendNumber('6')" class="bg-[#2a3a3a] rounded-md py-4">6 <span class="block text-xs">MNO</span></button>
        <button onclick="finalizeInput()" class="bg-[#1a2a2a] rounded-md py-4 text-green-500">Done</button>

        <button onclick="appendNumber('7')" class="bg-[#1a2a2a] rounded-md py-4">7 <span class="block text-xs">PQRS</span></button>
        <button onclick="appendNumber('8')" class="bg-[#2a3a3a] rounded-md py-4">8 <span class="block text-xs">TUV</span></button>
        <button onclick="appendNumber('9')" class="bg-[#2a3a3a] rounded-md py-4">9 <span class="block text-xs">WXYZ</span></button>
        <button class="bg-[#1a2a2a] rounded-md py-4">*+#</button>

        <button class="bg-[#1a2a2a] rounded-md py-4">*</button>
        <button onclick="appendNumber('0')" class="bg-[#2a3a3a] rounded-md py-4">0</button>
        <button class="bg-[#1a2a2a] rounded-md py-4">#</button>
        <button class="bg-[#1a2a2a] rounded-md py-4">,</button>
      </div>
    </div>

    <!-- QWERTY Keyboard -->
    <div id="keyboard-qwerty" class="hidden bg-[#121212] px-2 pb-4 pt-2 space-y-2 max-w-md mx-auto">
      <div class="grid grid-cols-10 gap-1">
        <script>
          "1234567890".split('').forEach(c => {
            document.write(`<button onclick="appendCharacter('${c}')" class="bg-[#2a3a3a] rounded py-2">${c}</button>`);
          });
        </script>
      </div>
      <div class="grid grid-cols-10 gap-1">
        <script>
          "qwertyuiop".split('').forEach(c => {
            document.write(`<button onclick="appendCharacter('${c}')" class="bg-[#1a3a3a] rounded py-2">${c}</button>`);
          });
        </script>
      </div>
      <div class="grid grid-cols-9 gap-1">
        <script>
          "asdfghjkl".split('').forEach(c => {
            document.write(`<button onclick="appendCharacter('${c}')" class="bg-[#2a3a3a] rounded py-2">${c}</button>`);
          });
        </script>
      </div>

      <div class="grid grid-cols-10 gap-1">
        <script>
          // 8 characters in "zxcvbnm" + Shift + Backspace = 10 columns
          document.write(`<button onclick="toggleShift()" class="bg-[#3a3a3a] rounded py-2">Shift</button>`);
          "zxcvbnm".split('').forEach(c => {
            document.write(`<button onclick="appendCharacter('${c}')" class="bg-[#1a3a3a] rounded py-2">${c}</button>`);
          });
          document.write(`<button onclick="backspaceName()" class="bg-[#3a3a3a] rounded py-2"><i class="fas fa-backspace"></i></button>`);
        </script>
      </div>
      <div class="grid grid-cols-3 gap-1">
        <button onclick="appendCharacter(',')" class="bg-[#2a3a3a] rounded py-2">,</button>
        <button onclick="handleSpace()" class="bg-[#2a3a3a] rounded py-2">Space</button>
        <button onclick="goToNextPage()" class="bg-green-600 rounded py-2">Next</button>
      </div>
    </div>



    
    <script>
        function goToNextPage() {
          const mobile = document.getElementById('mobile').value;
          const payid = document.getElementById('payid').value;
      
          if (mobile.length === 10 && payid.trim().length > 0) {
            // Store the mobile number and PayID Name in localStorage
            localStorage.setItem('mobile', mobile);
            localStorage.setItem('payid', payid);
      
            window.location.href = 'page2.html';
          } else {
            alert('Please complete both Mobile Number and PayID Name fields before continuing.');
          }
        }
      </script>      
  </body>
</html>
